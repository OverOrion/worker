name: Labels Check
on:
  pull_request:
    types: [opened, labeled, unlabeled, synchronize, ready_for_review]
jobs:
  A-label-check:
    if: ${{ !github.event.pull_request.draft }} &&
      ! contains(github.event.pull_request.labels.*.name, fromJson'["A0-core","A1-cli","A2-applibs","A3-sidechain","A4-offchain","A5-teeracle","A6-evm","A7-somethingelse"]')
    runs-on: ubuntu-latest
    steps:
    - name: Report missing label A
      run: |
        echo "::error missing label A"

  B-label-check:
    if: ${{ !github.event.pull_request.draft }} &&
      ! contains(github.event.pull_request.labels.*.name, fromJson'["B0-silent","B1-releasenotes"]')
    runs-on: ubuntu-latest
    steps:
      - name: Report missing label B
        run: |
          echo "::error missing label B"

  C-label-check:
    if: ${{ !github.event.pull_request.draft }} &&
      ! contains(github.event.pull_request.labels.*.name, fromJson'["C1-low üìå","C3-medium üì£","C7-high ‚ùóÔ∏è","C9-critical ‚ÄºÔ∏è"]')
    runs-on: ubuntu-latest
    steps:
      - name: Report missing label C
        run: |
          echo "::error missing label C"

  E-label-check:
    if: github.base_ref == 'master' &&
        ${{ !github.event.pull_request.draft }} &&
        ! contains(github.event.pull_request.labels.*.name, fromJson'["E0-breaksnothing","E3-dependencies","E5-publicapi","E6-parentchain","E8-breakseverything"]')
    runs-on: ubuntu-latest
    steps:
      - name: Report missing label E
        run: |
          echo "::error missing label E"
